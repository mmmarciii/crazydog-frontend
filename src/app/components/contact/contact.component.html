<section id="contactus" class="contact-section py-5 min-vh-100 d-flex align-items-center">
  <div class="container">
    @if (!isSent) {
      <div class="row mb-5 px-3 px-md-5 section-heading">
          <div class="col-12 border-start border-orange border-4 ps-4">
              <h1 class="display-3 fw-bold">{{'CONTACT.TITLE' | translate}}</h1>
              <p class="lead text-muted">{{'CONTACT.SUBTITLE' | translate}}</p>
          </div>
      </div>
    }

    @if (isSent) {
      <div class="row px-3 py-5 justify-content-center animate__animated animate__fadeIn">
        <div class="col-md-6 text-center shadow-lg p-5 rounded-5 bg-white">
          <div class="mb-4">
            <i class="bi bi-send-check-fill text-orange" style="font-size: 5rem;"></i>
          </div>
          <h2 class="display-4 fw-bold">{{'CONTACT.GREETING' | translate}}</h2>
          <p class="lead text-muted">{{'CONTACT.MESSAGE_SENT' | translate}}</p>
          <button class="btn btn-orange-outline btn-lg mt-4 px-5 rounded-pill" (click)="isSent = false">
            {{'CONTACT.BUTTON' | translate}}
          </button>
        </div>
      </div>
    }

    @if (!isSent) {
      <div class="row justify-content-center px-3">
        <div class="col-lg-10 col-xl-8">
          <div class="contact-card shadow-lg rounded-5 p-4 p-md-5 bg-white">
            <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="needs-validation">
              
              <div class="row g-4">
                <div class="col-md-6">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control custom-input" id="nameInput" placeholder="Your Name" formControlName="name" [class.is-invalid]="isFieldInvalid('name')">
                    <label for="nameInput">{{'CONTACT.NAME' | translate}}</label>
                    @if (isFieldInvalid('name')) { <div class="invalid-feedback">{{ getErrorMessage('name') }}</div> }
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-floating mb-3">
                    <input type="email" class="form-control custom-input" id="emailInput" placeholder="Email" formControlName="email" [class.is-invalid]="isFieldInvalid('email')">
                    <label for="emailInput">{{'CONTACT.EMAIL' | translate}}</label>
                    @if (isFieldInvalid('email')) { <div class="invalid-feedback">{{ getErrorMessage('email') }}</div> }
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control custom-input" id="subjectInput" placeholder="Subject" formControlName="subject" [class.is-invalid]="isFieldInvalid('subject')">
                    <label for="subjectInput">{{'CONTACT.SUBJECT' | translate}}</label>
                    @if (isFieldInvalid('subject')) { <div class="invalid-feedback">{{ getErrorMessage('subject') }}</div> }
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-floating mb-3">
                    <textarea class="form-control custom-input" id="textareaInput" style="height: 150px" placeholder="Message" formControlName="message" [class.is-invalid]="isFieldInvalid('message')"></textarea>
                    <label for="textareaInput">{{'CONTACT.MESSAGE' | translate}}</label>
                    @if (isFieldInvalid('message')) { <div class="invalid-feedback">{{ getErrorMessage('message') }}</div> }
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-check custom-checkbox py-2">
                    <input type="checkbox" class="form-check-input" id="gdprConsent" formControlName="gdprConsent">
                    <label class="form-check-label text-muted" for="gdprConsent">
                      {{'CONTACT.AGGREE1' | translate}}<a href="/privacy-policy" class="text-orange text-decoration-none fw-bold">{{'CONTACT.AGGREE2' | translate}}</a>.
                    </label>
                    @if (contactForm.get('gdprConsent')?.invalid && contactForm.get('gdprConsent')?.touched) {
                      <div class="text-danger small mt-1">{{'CONTACT.AGGREE3' | translate}}</div>
                    }
                  </div>
                </div>

                <div class="col-12 text-end mt-4">
                  <button type="submit" class="btn btn-orange-submit btn-lg px-5 py-3 rounded-pill shadow" [disabled]="contactForm.invalid">
                    {{'CONTACT.SENDING' | translate}} <i class="bi bi-arrow-right ms-2"></i>
                  </button>
                </div>
              </div>

            </form>
          </div>
        </div>
      </div>
    }
  </div>
</section>